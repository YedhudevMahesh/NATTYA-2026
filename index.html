<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NATTYA 2026 ‚Äì Official Results</title>

<style>
:root{
  --primary:#4b164c;
  --secondary:#9c27b0;
  --gold:#d4af37;
  --silver:#c0c0c0;
  --bronze:#cd7f32;
}
body{
  font-family:'Segoe UI',Arial,sans-serif;
  background:linear-gradient(180deg,#f7f3fb,#f0ecf7);
  margin:0;
  color:#333;
}
header{
  background:linear-gradient(135deg,#2c0a2f,var(--primary),var(--secondary));
  color:#fff;
  padding:35px;
  text-align:center;
}
header img{height:90px;margin-bottom:10px}
header h1{margin:0;font-size:36px;letter-spacing:2px}
header p{margin:6px 0 0;font-size:15px;opacity:.9}

.container{
  max-width:1200px;
  margin:50px auto;
  background:#fff;
  padding:35px;
  border-radius:18px;
  box-shadow:0 15px 35px rgba(0,0,0,.12);
}
h2{
  color:var(--primary);
  border-left:6px solid var(--secondary);
  padding-left:12px;
  font-size:22px;
}

.search-box{
  width:100%;
  padding:12px;
  margin:15px 0 25px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
}

.event-card{
  border:1px solid #ddd;
  border-radius:14px;
  padding:20px;
  margin-bottom:20px;
  background:#fafafa;
}
.event-title{
  font-size:18px;
  font-weight:bold;
  color:var(--primary);
  margin-bottom:10px;
}
.result-line{
  padding:8px 0;
  border-bottom:1px dashed #ccc;
}
.result-line:last-child{border-bottom:none}

.badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:14px;
  font-size:12px;
  font-weight:bold;
  margin-bottom:6px;
}
.badge.gold{background:linear-gradient(90deg,#ffd700,#ffecb3)}
.badge.silver{background:#e0e0e0}
.badge.bronze{background:#f3d0b0}

.winner{
  margin-left:12px;
  font-size:14px;
  margin-bottom:4px;
}

.points{
  font-weight:bold;
  color:var(--primary);
  margin-left:12px;
}

.table-wrap{overflow-x:auto}
table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin-top:20px;
  font-size:14px;
}
th,td{padding:12px;text-align:center}
th{background:linear-gradient(90deg,var(--primary),var(--secondary));color:#fff}
tr:nth-child(even){background:#fafafa}

#totals tr:nth-child(1){
  background:linear-gradient(90deg,#fff8e1,#ffe0b2);
  font-weight:bold;
  border-left:6px solid var(--gold)
}
#totals tr:nth-child(2){border-left:6px solid var(--silver)}
#totals tr:nth-child(3){border-left:6px solid var(--bronze)}

footer{
  background:linear-gradient(135deg,#2c0a2f,var(--primary));
  color:white;
  text-align:center;
  padding:18px;
  margin-top:50px;
  border-radius:0 0 18px 18px;
  font-size:13px;
}
</style>
</head>

<body>

<header>
  <img src="college-logo-1 (7).png" alt="College Logo">
  <h1>NATTYA 2026</h1>
  <p>College Youth Festival ‚Äì Official Results</p>
</header>

<div class="container">

<h2>üé≠ Event-wise Results</h2>
<input type="text" id="search" class="search-box"
 placeholder="Search by event, participant, group, department"
 onkeyup="filterResults()">

<div id="eventResults"></div>

<h2>üèÜ Championship Leaderboard</h2>
<div class="table-wrap">
<table>
<thead>
<tr>
  <th>Rank</th>
  <th>Group</th>
  <th>Total Points</th>
</tr>
</thead>
<tbody id="totals"></tbody>
</table>
</div>

<footer>
¬© NATTYA 2026 ‚Äì College Youth Festival<br>
Official Results Portal
</footer>

</div>

<script>
fetch("results.json")
  .then(res => res.json())
  .then(data => buildPage(data))
  .catch(() => {
    document.getElementById("eventResults").innerHTML =
      "<b>No results published yet.</b><br>Admin must upload results.json";
  });

function buildPage(data){

  let eventsMap = {};
  data.forEach(d=>{
    if(!eventsMap[d.event]) eventsMap[d.event] = {};
    if(!eventsMap[d.event][d.position])
      eventsMap[d.event][d.position] = [];
    eventsMap[d.event][d.position].push(d);
  });

  let totalsObj = {Mudhra:0, Lasya:0, Kavya:0};
  const posOrder = ["First","Second","Third"];
  let container = document.getElementById("eventResults");

  Object.keys(eventsMap).sort().forEach(eventName=>{
    let card = document.createElement("div");
    card.className = "event-card";

    let title = document.createElement("div");
    title.className = "event-title";
    title.innerText = eventName;
    card.appendChild(title);

    posOrder.forEach(pos=>{
      let list = eventsMap[eventName][pos];
      if(list){
        let line = document.createElement("div");
        line.className = "result-line";

        let badge = document.createElement("span");
        badge.className = "badge " +
          (pos === "First" ? "gold" :
           pos === "Second" ? "silver" : "bronze");
        badge.innerText = pos;
        line.appendChild(badge);

        list.forEach(r=>{
          let w = document.createElement("div");
          w.className = "winner";
          w.innerHTML =
            `<b>${r.participant}</b> (${r.group})
             <small> ‚Ä¢ ${r.department || ''} ${r.year || ''}</small>
             <span class="points">(${r.points} pts)</span>`;
          line.appendChild(w);

          totalsObj[r.group] += r.points || 0;
        });

        card.appendChild(line);
      }
    });

    container.appendChild(card);
  });

  let totalsArr = Object.entries(totalsObj)
    .map(([group,points])=>({group,points}))
    .sort((a,b)=>b.points - a.points);

  let totals = document.getElementById('totals');
  totalsArr.forEach((g,i)=>{
    let r = totals.insertRow();
    r.insertCell(0).innerText = i + 1;
    r.insertCell(1).innerText = g.group;
    r.insertCell(2).innerText = g.points;
  });
}

function filterResults(){
  let q = document.getElementById('search').value.toLowerCase();
  document.querySelectorAll('.event-card').forEach(card=>{
    card.style.display =
      card.innerText.toLowerCase().includes(q) ? '' : 'none';
  });
}
</script>

</body>
</html>
